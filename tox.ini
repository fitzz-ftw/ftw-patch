[tox]
# Test-Matrix von 3.11 bis 3.15
envlist = py311, py312, py313, py314, py315
minversion = 4.0
isolated_build = True

[testenv]
description = Run pytest with dependencies from pyproject.toml
# Hier nutzen wir deine optionalen Abh√§ngigkeiten aus der pyproject.toml
extras = 
    test
# Dies stellt sicher, dass das Paket vor dem Testen korrekt gebaut wird
package = wheel
wheel_build_env = .pkg
commands =
    # Wir nutzen pytest mit den Pfaden aus deiner pyproject.toml
    pytest --cov=ftw.patch --cov-branch --cov-report=html --cov-report=term-missing
    #pytest {posargs}

[testenv:py314]
ignore_outcome = true

[testenv:py315]
ignore_outcome = true

[testenv:lint]
description = Run ruff linter
extras = lint
commands = ruff check src

[testenv:build]
description = Build sdist and wheel for PyPI upload
skip_install = true
deps =
    build
    twine
allowlist_externals =
    rm
commands =
    rm -rf dist/ build/ *.egg-info
    python -m build
    twine check dist/*
